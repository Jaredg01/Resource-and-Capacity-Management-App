{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/SAIT/capstone_project/Resource-and-Capacity-Management-App/resource-and-capacity-management-app/app/Resource-Manager/dashboard/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\n\r\nconst styles = {\r\n  outfitFont: { fontFamily: 'Outfit, sans-serif' }\r\n};\r\n\r\nexport default function DashboardPage() {\r\n\r\n  /* ---------------------------------------------------------\r\n     USER SESSION STATE\r\n     ---------------------------------------------------------\r\n     PURPOSE:\r\n     - Stores logged-in user object\r\n     - Used for greeting, filtering, and profile navigation\r\n  --------------------------------------------------------- */\r\n  const [user, setUser] = useState(null);\r\n\r\n  /* ---------------------------------------------------------\r\n     SUMMARY STATE\r\n     ---------------------------------------------------------\r\n     PURPOSE:\r\n     - filter â†’ \"all\" or \"mine\"\r\n     - summary â†’ counts for active, hold, backlog initiatives\r\n     - Used to populate summary cards\r\n  --------------------------------------------------------- */\r\n  const [filter, setFilter] = useState(\"all\");\r\n  const [summary, setSummary] = useState({\r\n    active: 0,\r\n    hold: 0,\r\n    backlog: 0\r\n  });\r\n\r\n  const router = useRouter();\r\n\r\n  /* ---------------------------------------------------------\r\n     LOAD USER SESSION\r\n     ---------------------------------------------------------\r\n     PURPOSE:\r\n     - Retrieves user from localStorage\r\n     - Redirects to login if no session exists\r\n  --------------------------------------------------------- */\r\n  useEffect(() => {\r\n    const userData = localStorage.getItem('user');\r\n\r\n    if (!userData) {\r\n      router.push('/Profile/login');\r\n      return;\r\n    }\r\n\r\n    setUser(JSON.parse(userData));\r\n  }, [router]);\r\n\r\n  /* ---------------------------------------------------------\r\n     FETCH SUMMARY COUNTS\r\n     ---------------------------------------------------------\r\n     PURPOSE:\r\n     - Loads initiative summary counts based on filter\r\n     - If filter = \"mine\", includes username in API request\r\n     - Updates summary cards dynamically\r\n  --------------------------------------------------------- */\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    const fetchSummary = async () => {\r\n      try {\r\n        let url = `/api/Resource-Manager/summary?filter=${filter}`;\r\n\r\n        // Add username when viewing \"mine\"\r\n        if (filter === \"mine\") {\r\n          url += `&username=${encodeURIComponent(user.username)}`;\r\n        }\r\n\r\n        const res = await fetch(url);\r\n        const data = await res.json();\r\n\r\n        setSummary({\r\n          active: data.active,\r\n          hold: data.hold,\r\n          backlog: data.backlog\r\n        });\r\n\r\n      } catch (err) {\r\n        console.error(\"Summary fetch error:\", err);\r\n      }\r\n    };\r\n\r\n    fetchSummary();\r\n  }, [filter, user]);\r\n\r\n  /* ---------------------------------------------------------\r\n     LOADING STATE\r\n     ---------------------------------------------------------\r\n     PURPOSE:\r\n     - Prevents UI from rendering before user session loads\r\n     - Shows spinner for smoother UX\r\n  --------------------------------------------------------- */\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n\r\n      {/* -----------------------------------------------------\r\n         HEADER\r\n         -----------------------------------------------------\r\n         PURPOSE:\r\n         - Displays branding + app title\r\n         - Shows logged-in user\r\n         - Provides link to profile page\r\n      ----------------------------------------------------- */}\r\n      <header className=\"bg-[#017ACB] shadow-sm w-full\">\r\n        <div className=\"px-4 sm:px-6 lg:px-8 w-full\">\r\n          <div className=\"relative flex items-center h-[clamp(4.5rem,5vw,5.5rem)] w-full\">\r\n\r\n            {/* Logo + Company Name */}\r\n            <div className=\"flex items-center flex-none\">\r\n              <img\r\n                src=\"/CapstoneDynamicsLogo.png\"\r\n                alt=\"Logo\"\r\n                className=\"w-auto h-[clamp(3.2rem,3.8vw,4.0rem)]\"\r\n              />\r\n\r\n              <h1\r\n                className=\"font-bold text-white leading-tight ml-4 text-[clamp(1.6rem,1.7vw,2rem)]\"\r\n                style={styles.outfitFont}\r\n              >\r\n                Capstone Dynamics\r\n              </h1>\r\n            </div>\r\n\r\n            {/* Centered App Title */}\r\n            <div className=\"absolute left-1/2 -translate-x-1/2 text-center\">\r\n              <h1\r\n                className=\"font-bold text-white leading-tight text-[clamp(1.2rem,1.3vw,1.6rem)]\"\r\n                style={styles.outfitFont}\r\n              >\r\n                Resource & Capacity Management Planner\r\n              </h1>\r\n            </div>\r\n\r\n            {/* User Profile Icon */}\r\n            <div className=\"flex items-center gap-4 ml-auto flex-none\">\r\n              <span\r\n                className=\"font-semibold text-white text-[clamp(1rem,1.15vw,1.25rem)]\"\r\n                style={styles.outfitFont}\r\n              >\r\n                {user.username}\r\n              </span>\r\n\r\n              <Link\r\n                href=\"/Resource-Manager/Profile/view-profile\"\r\n                className=\"rounded-full bg-white flex items-center justify-center overflow-hidden hover:opacity-90 transition cursor-pointer\r\n                           w-[clamp(2.4rem,2.8vw,3.0rem)] h-[clamp(2.4rem,2.8vw,3.0rem)]\"\r\n                title=\"View Profile\"\r\n              >\r\n                <span className=\"text-[#017ACB] font-bold text-[clamp(1.1rem,1.3vw,1.5rem)]\">\r\n                  {user.username.charAt(0).toUpperCase()}\r\n                </span>\r\n              </Link>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* -----------------------------------------------------\r\n         MAIN CONTENT\r\n         -----------------------------------------------------\r\n         PURPOSE:\r\n         - Displays greeting\r\n         - Shows filter buttons\r\n         - Renders summary cards\r\n         - Provides navigation tiles to other modules\r\n      ----------------------------------------------------- */}\r\n      <main className=\"w-full px-4 sm:px-6 lg:px-12 pt-[clamp(0.8rem,1.5vw,2rem)] pb-[clamp(1.5rem,3vw,3rem)]\">\r\n\r\n        {/* Greeting */}\r\n        <h2\r\n          className=\"text-[clamp(1.4rem,1.8vw,2.2rem)] text-gray-900 mb-[clamp(0.6rem,1vw,1.2rem)]\"\r\n          style={styles.outfitFont}\r\n        >\r\n          Welcome back, {user.username}\r\n        </h2>\r\n\r\n        {/* -----------------------------------------------------\r\n           FILTER BUTTONS\r\n           -----------------------------------------------------\r\n           PURPOSE:\r\n           - Toggle between \"all\" and \"mine\"\r\n           - Updates summary cards dynamically\r\n        ----------------------------------------------------- */}\r\n        <div className=\"flex gap-2 mb-[clamp(0.6rem,1vw,1.2rem)]\">\r\n          <button\r\n            onClick={() => setFilter(\"all\")}\r\n            className={`px-[clamp(0.4rem,0.6vw,0.8rem)]\r\n                        py-[clamp(0.2rem,0.4vw,0.6rem)]\r\n                        w-[clamp(3.5rem,4.5vw,5.5rem)]\r\n                        border text-center cursor-pointer rounded\r\n                        text-[clamp(0.9rem,1vw,1.1rem)]\r\n                        ${filter === \"all\" ? \"bg-[#017ACB] text-white\" : \"text-gray-600\"}`}\r\n            style={styles.outfitFont}\r\n          >\r\n            All\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => setFilter(\"mine\")}\r\n            className={`px-[clamp(0.4rem,0.6vw,0.8rem)]\r\n                        py-[clamp(0.2rem,0.4vw,0.6rem)]\r\n                        w-[clamp(3.5rem,4.5vw,5.5rem)]\r\n                        border text-center cursor-pointer rounded\r\n                        text-[clamp(0.9rem,1vw,1.1rem)]\r\n                        ${filter === \"mine\" ? \"bg-[#017ACB] text-white\" : \"text-gray-600\"}`}\r\n            style={styles.outfitFont}\r\n          >\r\n            Mine\r\n          </button>\r\n        </div>\r\n\r\n        {/* -----------------------------------------------------\r\n           SUMMARY CARDS\r\n           -----------------------------------------------------\r\n           PURPOSE:\r\n           - Displays counts for active, hold, backlog\r\n           - Uses icons + values for quick visual scan\r\n        ----------------------------------------------------- */}\r\n        <div className=\"grid grid-cols-3 gap-[clamp(1rem,2vw,2.5rem)] mb-[clamp(1.5rem,2vw,2.5rem)] w-full\">\r\n          {[\r\n            { label: 'Active Initiatives', icon: 'âœ…', value: summary.active },\r\n            { label: 'Initiatives on Hold', icon: 'â¸ï¸', value: summary.hold },\r\n            { label: 'Initiatives in Back Log', icon: 'ðŸ“…', value: summary.backlog },\r\n          ].map((item, i) => (\r\n            <div key={i} className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-[clamp(1rem,1.5vw,2rem)] transition\">\r\n              <p className=\"text-gray-600 text-[clamp(0.8rem,0.9vw,1rem)] text-right\" style={styles.outfitFont}>\r\n                {item.label}\r\n              </p>\r\n              <h3 className=\"text-[clamp(1.1rem,1.3vw,1.5rem)] font-semibold text-gray-900 mb-2\" style={styles.outfitFont}>\r\n                {item.icon} {item.value}\r\n              </h3>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* -----------------------------------------------------\r\n           NAVIGATION TILES\r\n           -----------------------------------------------------\r\n           PURPOSE:\r\n           - Provides quick access to other modules\r\n           - Tiles without href are placeholders for future features\r\n        ----------------------------------------------------- */}\r\n        <div className=\"grid grid-cols-3 gap-[clamp(1rem,2vw,2.5rem)] w-full\">\r\n          {[\r\n            { label: 'Capacity Summary', icon: 'ðŸ“Š', href: '/Resource-Manager/capacity_summary' },\r\n            { label: 'Resources', icon: 'ðŸ‘¥', href: '/Resource-Manager/create_edit_Resources' },\r\n            { label: 'Initiatives', icon: 'ðŸŽ¯', href: '/Resource-Manager/create_edit_Initiatives' },\r\n            { label: 'Assignments', icon: 'ðŸ“‹', href: null },\r\n            { label: 'Calendar', icon: 'ðŸ“…', href: '/Resource-Manager/calendar_view' },\r\n            { label: 'Report', icon: 'ðŸ“ˆ', href: null },\r\n          ].map((tile, i) => {\r\n\r\n            const content = (\r\n              <div className=\"bg-white rounded-lg shadow-sm border text-center border-gray-200 p-[clamp(1rem,1.5vw,2rem)] hover:shadow-md hover:border-gray-500 cursor-pointer transition\">\r\n                <div className=\"text-[clamp(2rem,2.5vw,3rem)] mb-2 text-gray-700\">{tile.icon}</div>\r\n                <h3 className=\"text-[clamp(1rem,1.2vw,1.4rem)] font-semibold text-gray-900 mb-2\" style={styles.outfitFont}>\r\n                  {tile.label}\r\n                </h3>\r\n              </div>\r\n            );\r\n\r\n            return tile.href ? (\r\n              <Link key={i} href={tile.href}>{content}</Link>\r\n            ) : (\r\n              <div key={i}>{content}</div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}